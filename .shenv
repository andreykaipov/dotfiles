#!/bin/sh
# shellcheck disable=SC2086
#
# Note this file uses a few commands like `tr` and `dircolors.hex` on our PATH
# to create environment variables. If sourced from a shell with an empty PATH,
# it'll fail. Thankfully, shells are smart and shouldn't let you do this. The
# following starts a shell with an empty environment. It's supposed to mimic our
# login shell and the `promote` function in ~/.shrc too.
#
# ```
# env - sh -c 'env; echo $PATH'
# ```
#
# The only env var output will be PWD. However, the PATH printed in this case
# will be the common **/sbin and **/bin directories. With this, we'll be able to
# re-export the path with `tr`, and any other dependent binaries like in ~/bin
# will be found. Having said that, there are a few env vars we do always need
# though:
# ```
# env - "HOME=$HOME" SHELL=sh sh -c '. $HOME/.shenv; env' | sort
# ```
#
# HOME and SHELL are not implicit and have to be passed. Again, see the
# `promote` function.

paths="
    $HOME/bin
    /usr/local/sbin
    /usr/local/bin
    /usr/sbin
    /usr/bin
    /sbin
    /bin
    /mnt/c/Windows/System32/WindowsPowerShell/v1.0
    /mnt/c/Windows/System32
    /mnt/c/Windows
"
PATH="$(echo $paths | tr ' ' ':')"
export PATH

export TMPDIR="${TMP:-/tmp}"
export EDITOR=vi

export DOCKER_HOST=tcp://localhost:2375

export GOBIN="$HOME/bin"
export GOPATH="$HOME/go"

# ANSI escape codes.
# https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_parameters
# https://en.wikipedia.org/wiki/ANSI_escape_code#Colors
# We could use 24-bit colors but these are fine.

export _default='\033[39m'
export _white='\033[97m'

export _black='\033[30m'
export _red='\033[31m'
export _green='\033[32m'
export _yellow='\033[33m'
export _blue='\033[34m'
export _purple='\033[35m'
export _cyan='\033[36m'

export _lightblack='\033[90m'
export _lightred='\033[91m'
export _lightgreen='\033[92m'
export _lightyellow='\033[93m'
export _lightblue='\033[94m'
export _lightpurple='\033[95m'
export _lightcyan='\033[96m'

export _brightred='\033[1;31m'
export _brightgreen='\033[1;32m'
export _brightyellow='\033[1;33m'
export _brightblue='\033[1;34m'
export _brightpurple='\033[1;35m'
export _brightcyan='\033[1;36m'

export _reset='\033[0m'

#

eval "$(dircolors.hex "$HOME/.dir_colors")"

#

# bash-specific to pretty history
export HISTFILE="$HOME/.bash_history"
export HISTTIMEFORMAT="%F %T "
export HISTCONTROL=ignoredups:ignorespace
