#!/bin/sh
# shellcheck disable=SC2086
#
# Note this file uses a few commands like `tr` and `dircolors.hex` on our PATH
# to create environment variables. If sourced from a shell with an empty PATH,
# it'll fail. Thankfully, shells are smart and shouldn't let you do this. The
# following starts a shell with an empty environment. It's supposed to mimic our
# login shell and the `promote` function in ~/.shrc too.
#
# ```
# env - sh -c 'env; echo $PATH'
# ```
#
# The only env var output will be PWD. However, the PATH printed in this case
# will be the common **/sbin and **/bin directories. With this, we'll be able to
# re-export the path with `tr`, and any other dependent binaries like in ~/bin
# or $GOBIN will be found. Having said that, there is one env var we do always
# need though:
#
# ```
# env - "HOME=$HOME" sh -c '. $HOME/.shenv; env' | sort
# ```
#
# HOME is not implicit and has to be passed. See the `promote` function.

export TMP="${TMP:-/tmp}"
export TMPDIR="${TMPDIR:-$TMP}"
export GOPATH="$HOME/local/share/go"
export GOBIN="$HOME/local/share/go/bin"
export DOCKER_HOST=tcp://localhost:2375
export EDITOR=vi

paths="
    $HOME/bin
    $GOBIN
    /usr/local/sbin
    /usr/local/bin
    /usr/sbin
    /usr/bin
    /sbin
    /bin
    /mnt/c/Windows/System32/WindowsPowerShell/v1.0
    /mnt/c/Windows/System32
    /mnt/c/Windows
"
PATH="$(echo $paths | tr ' ' ':')"
export PATH

# ANSI escape codes.
# https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_parameters
# https://en.wikipedia.org/wiki/ANSI_escape_code#Colors
# We could use 24-bit colors but these are fine.

export _reset='\033[0m'
export _default='\033[39m'
export _brightblack='\033[1;30m'
export _brightred='\033[1;31m'
export _brightgreen='\033[1;32m'
export _brightyellow='\033[1;33m'
export _brightblue='\033[1;34m'
export _brightpurple='\033[1;35m'
export _brightcyan='\033[1;36m'
export _brightwhite='\033[1;37m'

#

# As this file will be sourced, we can find our shell via $0.
export SHELL="$0"
eval "$(dircolors.hex "$HOME/.dir_colors")"

#

# bash-specific to pretty history
export HISTFILE="$HOME/.bash_history"
export HISTTIMEFORMAT="%F %T "
export HISTCONTROL=ignoredups:ignorespace

export HI=hello
